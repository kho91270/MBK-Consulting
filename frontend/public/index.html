<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico?v=2" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="manifest" href="/site.webmanifest" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0" />
    <meta name="theme-color" content="#0A192F" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Playfair+Display:ital,wght@0,700;1,700&display=swap" rel="stylesheet">

    <title>MBK Procurement | Ingénierie de la Performance Achats</title>
    
    <style>
      body, html {
        margin: 0; padding: 0; background-color: #0A192F;
        width: 100%; min-height: 100%; font-family: 'Inter', sans-serif;
      }

      body.is-loading { overflow: hidden; }

      #splash-screen {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background-color: #0A192F; display: flex; flex-direction: column;
        justify-content: center; align-items: center; z-index: 9999;
        transition: opacity 0.8s ease-out, visibility 0.8s;
      }

      .logo-container { text-align: center; animation: fadeInScale 1.2s ease-out forwards; }
      .logo-text { color: white; font-family: 'Playfair Display', serif; font-size: 2.5rem; font-weight: bold; letter-spacing: -0.02em; }
      .logo-subtext { color: #2563eb; font-family: 'Inter', sans-serif; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 0.4em; margin-left: 10px; font-weight: 600; }

      .loader-bar-container { width: 140px; height: 1px; background: rgba(255, 255, 255, 0.1); margin-top: 30px; position: relative; overflow: hidden; }
      .loader-bar-progress { position: absolute; height: 100%; width: 0%; background: #2563eb; transition: width 0.5s ease; }

      /* AJOUT : Styles pour les textes de maintenance */
      .status-container { margin-top: 24px; text-align: center; }
      #status-title { color: white; font-size: 11px; text-transform: uppercase; letter-spacing: 0.2em; margin-bottom: 6px; font-weight: 600; }
      #status-desc { color: rgba(255,255,255,0.4); font-size: 10px; letter-spacing: 0.05em; font-weight: 300; }

      @keyframes fadeInScale {
        0% { opacity: 0; transform: scale(0.95); }
        100% { opacity: 1; transform: scale(1); }
      }
    </style>
  </head>
  
  <body class="is-loading">
    <div id="splash-screen">
      <div class="logo-container">
        <span class="logo-text">MBK <span class="logo-subtext">Procurement</span></span>
      </div>
      
      <div class="loader-bar-container">
        <div id="progress-bar" class="loader-bar-progress"></div>
      </div>

      <div class="status-container">
        <p id="status-title"></p>
        <p id="status-desc"></p>
      </div>
    </div>

    <div id="root"></div>

    <script>
      // 1. DÉTECTION DE LA LANGUE (Natif Navigateur)
      const userLang = navigator.language || navigator.userLanguage; 
      const isEn = userLang.startsWith('en');

      // 2. TRADUCTION DU SPLASH
      const splashContent = {
        fr: { title: "Système en maintenance", desc: "Mise à jour des protocoles de performance..." },
        en: { title: "System Maintenance", desc: "Updating performance protocols..." }
      };

      const content = isEn ? splashContent.en : splashContent.fr;
      document.getElementById('status-title').innerText = content.title;
      document.getElementById('status-desc').innerText = content.desc;

      // 3. GESTION DU CHARGEMENT
      setTimeout(() => {
        const bar = document.getElementById('progress-bar');
        if(bar) bar.style.width = '40%';
      }, 100);

      window.addEventListener('load', function() {
        const splash = document.getElementById('splash-screen');
        const progressBar = document.getElementById('progress-bar');
        
        if(progressBar) progressBar.style.width = '100%';
        
        setTimeout(() => {
          if(splash) {
            splash.style.opacity = '0';
            splash.style.visibility = 'hidden';
            // On retire complètement du DOM après l'animation pour libérer les ressources
            setTimeout(() => { splash.style.display = 'none'; }, 800);
          }
          document.body.classList.remove('is-loading');
        }, 800);
      });

      // Sécurité 5s
      setTimeout(() => { document.body.classList.remove('is-loading'); }, 5000);
    </script>

    <script type="module" src="/src/main.jsx"></script>

    <noscript>
      <div style="text-align: center; padding: 50px; color: white; background: #0A192F; height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center;">
        <h1 style="font-family: 'Playfair Display', serif;">JavaScript Required</h1>
        <p style="font-family: 'Inter', sans-serif; opacity: 0.6;">Please enable JavaScript to access MBK Procurement.</p>
      </div>
    </noscript>
  </body>
</html>
